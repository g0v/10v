// Generated by LiveScript 1.3.1
(function(){
  ldui.Nav = function(root){
    var lc, view;
    lc = {
      active: {},
      pends: {}
    };
    return view = new ldView({
      root: root,
      action: {
        click: {
          "nav": function(arg$){
            var node, evt, tgt, n, g;
            node = arg$.node, evt = arg$.evt;
            if (!(tgt = ld$.parent(evt.target, '[ld]', node))) {
              return;
            }
            if (node === tgt) {
              return;
            }
            n = tgt.getAttribute('data-name');
            g = node.getAttribute('data-nav');
            lc.active[g] = {
              name: n,
              node: tgt
            };
            view.render();
            return setTimeout(function(){
              var o, ref$;
              if ((o = ((ref$ = lc.pends)[g] || (ref$[g] = {}))[n]) && !o.inited) {
                o.func();
                return o.inited = true;
              }
            }, 10);
          }
        }
      },
      handler: {
        "nav-tab": function(arg$){
          var node, g, p, n, active;
          node = arg$.node;
          g = node.getAttribute('data-nav');
          if (!g) {
            if (!(p = ld$.parent(node, '[ld=nav]', document))) {
              return;
            }
            if (!(g = p.getAttribute('data-nav'))) {
              return;
            }
          }
          n = node.getAttribute('data-name');
          active = lc.active[g] || {};
          return node.classList.toggle('active', active.node === node || (!lc.active[g] && /default/.exec(node.getAttribute('ld'))));
        },
        "nav-panel": function(arg$){
          var node, g;
          node = arg$.node;
          g = node.getAttribute('data-nav');
          return node.classList.toggle('d-none', (lc.active[g] && lc.active[g].name !== node.getAttribute('data-name')) || (!lc.active[g] && !/default/.exec(node.getAttribute('ld'))));
        }
      }
    });
  };
  return ldui.Nav(document.body);
})();