<div><div class="ldcv" ld="cover"><div class="base"><div class="inner p-4" ld="inner"><div class="d-flex align-items-center justify-content-center h-100"><div class="text-center"><div class="mb-4" ld="box"></div><div class="btn btn-outline-secondary btn-block" data-ldcv-set="ok">OK</div></div></div></div></div></div><script type="@plotdb/block">var provider,ref$,captcha;provider=function(t){t==null&&(t={});return import$(this,t)};provider.prototype=(ref$=Object.create(Object.prototype),ref$.create=function(t){t==null&&(t={});return new this.factory(t)},ref$.cfg=function(t){if(t!=null){return import$(this._cfg||(this._cfg={}),t)}else{return this._cfg||{}}},ref$);captcha={_p:{},_order:null,cfg:{},init:function(t){var e,r,n,i=[];t==null&&(t={});this.cfg=t;for(e in r=this._p){n=r[e];i.push(n.cfg(import$({},this.cfg[e])))}return i},register:function(t,e){var r,n,i,o;e==null&&(e={});this._p[t]=r=new provider(e);n=r["interface"]||{};r.factory=i=function(t){t==null&&(t={});this.opt=t;this.init=proxise.once(function(){var t=this;return this._provider.init().then(function(){return t._init()})});return this};return i.prototype=(o=import$(import$({_provider:r},Object.create(Object.prototype)),n),o.priority=99,o._init=n.init,o)},get:function(t){return this._p[t]},order:function(e){var r,t,n,i,o,c=this;e==null&&(e=[]);t=[];for(n in i=this._p){o=i[n];t.push([n,o])}r=t;r.sort(function(t,e){return(t[1].priority||99)-(e[1].priority||99)});r=r.map(function(t){return t[0]});this._order=e.filter(function(t){return in$(t,r)}).concat(r.filter(function(t){return!in$(t,e)}));return this._order=this._order.filter(function(t){return c.cfg[t]&&c.cfg[t].enabled&&c.cfg[t].sitekey})},guard:function(e){var n,t=this;e==null&&(e={});if(!this._order){this.order()}if(!this._order.length){return Promise.resolve().then(function(){return e.cb()})}n=function(r){r==null&&(r=0);if(r>=t._order.length){return lderror.reject(1010)}return t.verify(import$({name:t._order[r]},e)).then(function(t){return e.cb(t)})["catch"](function(t){var e;if((e=lderror.id(t))===1009||e===1010){return debounce(1e3).then(function(){return n(r+1)})}else{return Promise.reject(t)}})};return Promise.resolve().then(function(){return t.ldld.on()}).then(function(){return n()})["finally"](function(){return t.ldld.off()})},prepare:function(t){this.root=t;return this.ldld=new ldloader({className:"ldld full"})},verify:function(t){var r,n,e,i,o,c,u=this;r=t.name;n=this.get(r);if(!(this.obj||(this.obj={}))[r]){if(n.headless){e=Promise.resolve();i=null}else{o=this.root.querySelector(".ldcv").cloneNode(true);c=o.querySelector("[ld=box]");this.root.appendChild(o);i=new ldcover({root:o});e=i.get()}this.obj[r]={obj:this.get(r).create({root:c}),ldcv:i,provider:n}}else{if(this.obj[r].provider.headless){e=Promise.resolve()}else{e=this.obj[r].ldcv.get()}}return this.obj[r].obj.init().then(function(){return u.obj[r].obj.render()}).then(function(){return e}).then(function(){var e,t;e={};t=u.obj[r].obj.get().then(function(t){e.done=t;if(e.deb){e.deb.now()}return e.done});if(n.headless){return t}e.deb=debounce(5e3,function(){})();return e.deb.then(function(){var t;e.deb=null;return(t=e.done)?t:lderror.reject(1006)})["catch"](function(t){return Promise.reject(t)})})["catch"](function(t){console.log(t);return{}})},examine:function(){var t,e,r,n,i=this;t=this.root;e=new ldview({root:t,action:{click:{ok:function(){return n.get().then(function(t){console.log("result",t);return i.ldcv.toggle(false)})}}}});r=t.querySelector("[ld=box]");this.ldcv=new ldcover({root:t.querySelector(".ldcv")});this.ldcv.toggle();n=captcha.get("recaptcha_v2_checkbox").create({root:r});n=n;return n.init().then(function(){n.render();return console.log("capobj inited")})}};captcha.register("hcaptcha",{priority:3,init:proxise.once(function(){var n=this;return new Promise(function(t,e){var r;n._script=r=document.createElement("script");r.onerror=function(t){return e(t)};r.onload=function(){n.inited=true;return t()};r.setAttribute("type","text/javascript");r.setAttribute("src","https://js.hcaptcha.com/1/api.js?recaptchacompat=off");return document.body.appendChild(r)})}),interface:{init:function(){this.root=typeof this.opt.root==="string"?document.querySelector(this.opt.root):this.opt.root;this._tag=document.createElement("div");return this.root.appendChild(this._tag)},reset:function(){return hcaptcha.reset(this.id)},render:function(){var t;if(!(this.id!=null)){return this.id=hcaptcha.render(this._tag,{theme:(t=this._provider.cfg()).theme,size:t.size,sitekey:t.sitekey})}else{return this.reset()}},get:function(){var t,e;t=(e=hcaptcha.getResponse(this.id))?Promise.resolve(e):(this.render(),hcaptcha.execute(this.id,{async:true}).then(function(t){var e,r;e=t.response,r=t.key;return e}));return t.then(function(t){return{token:t,name:"hcaptcha"}})}}});captcha.register("recaptcha_v3",{priority:1,headless:true,init:proxise.once(function(){var n=this;return Promise.resolve().then(function(){return new Promise(function(t,e){var r;n._script=r=document.createElement("script");r.onerror=function(t){return e(t)};r.onload=function(){return grecaptcha.ready(function(){return t(n.inited=true)})};r.setAttribute("type","text/javascript");r.setAttribute("src","https://www.google.com/recaptcha/api.js?render="+n._cfg.sitekey);return document.body.appendChild(r)})})}),interface:{init:function(){},get:function(){var t;t=this._provider.cfg();if(!(t.sitekey&&t.enabled)){return lderror.reject(998)}return grecaptcha.execute(t.sitekey,{action:"generic"}).then(function(t){return{token:t,name:"recaptcha_v3"}})},reset:function(){},render:function(){}}});captcha.register("recaptcha_v2_checkbox",{priority:2,init:proxise.once(function(){var n=this;return new Promise(function(t,e){var r;n._script=r=document.createElement("script");r.onerror=function(t){return e(t)};r.onload=function(){return grecaptcha.ready(function(){return t(n.inited=true)})};r.setAttribute("type","text/javascript");r.setAttribute("src","https://www.google.com/recaptcha/api.js");return document.body.appendChild(r)})}),interface:{init:function(){this.root=typeof this.opt.root==="string"?document.querySelector(this.opt.root):this.opt.root;this._tag=document.createElement("div");return this.root.appendChild(this._tag)},get:function(){var e=this;return Promise.resolve().then(function(){var t;t=grecaptcha.getResponse(e.id);return{token:t,name:"recaptcha_v2_checkbox"}})},reset:function(){},render:function(){var t;if(!(this.id!=null)){return this.id=grecaptcha.render(this._tag,{theme:(t=this._provider.cfg()).theme,size:t.size,sitekey:t.sitekey})}}}});if(typeof module!="undefined"&&module!==null){module.exports={init:function(t){var e;e=t.root;return captcha.prepare(e)},interface:function(){return captcha}}}else if(window){window.captcha=captcha}function import$(t,e){var r={}.hasOwnProperty;for(var n in e)if(r.call(e,n))t[n]=e[n];return t}function in$(t,e){var r=-1,n=e.length>>>0;while(++r<n)if(t===e[r])return true;return false}</script></div>
